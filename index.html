<div id="unity-container" class="unity-desktop">
  <canvas id="unity-canvas" width=960 height=600></canvas>
</div>
<script>
  var fdd // Will become unityInstance.
  const canvas = document.querySelector("#unity-canvas");
  const buildPath = "/space/operator_portals/fddprototype/Build/networkDiagram.";
  var loaderUrl = buildPath + "loader.js";
  var config = {
    dataUrl: buildPath + "data",
    frameworkUrl: buildPath + "framework.js",
    codeUrl: buildPath + "wasm",
    streamingAssetsUrl: "/space/operator_portals/fddprototype/StreamingAssets",
    companyName: "DefaultCompany",
    productName: "rxgtest",
    productVersion: "0.1",
    showBanner: false,
  };

  function testSF1() {
    loadDiagram(haleSF1);
  }
  function loadDiagram(json){
    fdd.SendMessage('ForceDirectedDiagram', 'ImportDiagram', JSON.stringify(json));
  }
  function setFullScreen() {
    fdd.SetFullscreen(1);
  }

  const script = document.createElement("script");
  script.src = loaderUrl;
  script.onload = () => {
    createUnityInstance(canvas, config, (progress) => {})
    .then((unityInstance) => {
      fdd = unityInstance;
    }).catch((message) => {
      alert(message);
    });
  };
  document.body.appendChild(script);

  const haleSF1 = {
    "nodes": [
      {
        "label": "Ruckus ICX 7550-48ZP core",
        "description": "Stackable ICX7550-48Z-POE",
        "id": "Ruckus ICX 7550-48ZP core",
        "image": "ICX-7150-24",
        "ipAddress": "172.30.6.2",
        "group": 1,
        "subgroup": 0,
        "groupname": "",
        "depth": 0
      },
      {
        "label": "CC1",
        "description": "",
        "id": "CC1",
        "image": "eng_device",
        "ipAddress": "",
        "group": 2,
        "subgroup": 0,
        "groupname": "",
        "depth": 0
      },
      {
        "label": "TL-SG2210P garage",
        "description": "TL-SG2210P 3.20",
        "id": "TL-SG2210P garage",
        "image": "TL-SG2210P",
        "ipAddress": "172.30.6.7",
        "group": 3,
        "subgroup": 0,
        "groupname": "",
        "depth": 0
      },
      {
        "label": "TL-SG2210P david",
        "description": "TL-SG2210P 3.20",
        "id": "TL-SG2210P david",
        "image": "TL-SG2210P",
        "ipAddress": "172.30.6.8",
        "group": 3,
        "subgroup": 0,
        "groupname": "",
        "depth": 0
      },
      {
        "label": "Ruckus ICX 7150-C12P office",
        "description": "Stackable ICX7150-C12-POE",
        "id": "Ruckus ICX 7150-C12P office",
        "image": "ICX-7150-12",
        "ipAddress": "172.30.6.6",
        "group": 4,
        "subgroup": 0,
        "groupname": "",
        "depth": 0
      },
      {
        "label": "David R850",
        "description": "34:20:e3:28:8b:c0",
        "id": "David R850",
        "image": "",
        "ipAddress": "172.30.6.253",
        "group": 3,
        "subgroup": 2,
        "groupname": "",
        "depth": 0
      },
      {
        "label": "Ruckus ICX 7150-C12P guest",
        "description": "Stackable ICX7150-C12-POE",
        "id": "Ruckus ICX 7150-C12P guest",
        "image": "ICX-7150-12",
        "ipAddress": "172.30.6.3",
        "group": 5,
        "subgroup": 0,
        "groupname": "",
        "depth": 0
      },
      {
        "label": "Router1",
        "description": "",
        "id": "Router1",
        "image": "router",
        "ipAddress": "fd00:6c24::2",
        "group": 2,
        "subgroup": 1,
        "groupname": "",
        "depth": 0
      },
      {
        "label": "Router2",
        "description": "",
        "id": "Router2",
        "image": "router",
        "ipAddress": "100.64.0.2",
        "group": 2,
        "subgroup": 1,
        "groupname": "",
        "depth": 0
      },
      {
        "label": "Router3",
        "description": "",
        "id": "Router3",
        "image": "router",
        "ipAddress": "172.16.0.101",
        "group": 2,
        "subgroup": 1,
        "groupname": "",
        "depth": 0
      }      
    ],
    "links": [
      {
        "source": "Ruckus ICX 7550-48ZP core",
        "target": "CC1",
        "length": 0,
        "group": 0,
        "description": ""
      },
      {
        "source": "Ruckus ICX 7550-48ZP core",
        "target": "TL-SG2210P garage",
        "length": 0,
        "group": 0,
        "description": ""
      },
      {
        "source": "TL-SG2210P garage",
        "target": "TL-SG2210P david",
        "length": 0,
        "group": 0,
        "description": ""
      },
      {
        "source": "Ruckus ICX 7550-48ZP core",
        "target": "Ruckus ICX 7150-C12P office",
        "length": 0,
        "group": 0,
        "description": ""
      },
      {
        "source": "TL-SG2210P david",
        "target": "David R850",
        "length": 0,
        "group": 0,
        "description": ""
      },
      {
        "source": "Ruckus ICX 7550-48ZP core",
        "target": "Ruckus ICX 7150-C12P guest",
        "length": 0,
        "group": 0,
        "description": ""
      },
      {
        "source": "CC1",
        "target": "Router1",
        "length": 0,
        "group": 0,
        "description": ""
      },
      {
        "source": "CC1",
        "target": "Router2",
        "length": 0,
        "group": 0,
        "description": ""
      },
      {
        "source": "CC1",
        "target": "Router3",
        "length": 0,
        "group": 0,
        "description": ""
      }
    ]
  }
  
</script>